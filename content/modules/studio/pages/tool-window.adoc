= Amplicode Tool Window and Entity Designer

Once you install Amplicode and create your first Amplicode project, you will find its editor toolbar (1) on the right-hand side of your IntelliJ IDEA window. There will also be an additional toolbar (2) at the upper part of the window containing the source code of the file, as long as you have at least one file opened.

image::amplicode-toolbars.png[align=center]

Amplicode provides the following tool windows:

 * Structure (1)
 * Palette (2)
 * Inspector (3)

image::structure.png[align=center]

[[structure]]
== Structure
The *_Structure_* tab offers a comprehensive, data-centric view of the project. You can use it for various purposes:

 * Traverse through the data model and observe the entity structure represented hierarchically. This feature allows for easy navigation to entities referencing the current one, as well as ones that the current entity refers to. This is an extremely useful feature, especially for those who are new to an existing project with a large entity graph or for code reviewers who have limited time to understand how the data model is designed.
 * Create data-related objects: entities, JPA converters / Hibernate custom types, Spring Data repositories and Liquibase changelog.
 * Observe related Spring Data repositories, DTOs and projections for each entity.
 * Edit additional project artifacts such as DB connections, persistence units, and other artifacts that the plugin could not detect automatically.

Below, you can see the upper and the lower fragments of the *_Structure_* panel side by side with sections partially expanded.

image::structure2.png[align=center]

[[palette]]
== Palette
The *_Palette_* is located on the Designer tab, in the upper part of the panel. It can look differently in different contexts.

The version of the *_Palette_* for JPA entities is shown below:

image::palette.png[align=center]

The *_Palette_* aims to generate code appropriate in the current context. For an entity, it can be an attribute or an index; for a repository - a query method, etc. Hence the different look of the *_Palette_* depending on the type of the file that you are editing.

The *_Palette_* provides code-generation wizards for the following:

 * Attributes
 * Lifecycle Callbacks
 * Indexes
 * Named Query
 * Reverse Engineering
 * Utilities – Equals/HashCode/ToString

[[inspector]]
== Inspector

The *_Inspector_* is designed to edit existing code: attributes, indexes, queries, etc.

The *_Inspector_* allows you to configure JPA entities and attributes in it. Click on any element that you need to configure, and change the required properties:

image::inspector-properties.png[align=center]

[[hibernate-validations]]
=== Hibernate validations.
For projects with Hibernate Validations, a section appears with validations that you can apply for the selected attribute:

image::inspector.png[align=center]

Notice that the properties and validations offered by the Inspector depend on the data type of the attribute. For example, the set of properties and validations offered for an Integer attribute will be different from a String attribute, etc...

[[editor-toolbar]]
== Editor Toolbar

Editor Toolbar contains relevant action depending on the file content. You can find it on top of the editor window.

[[entity-generation]]
== Entity Generation

To create a new JPA entity, right-click on the desired folder and select New -> JPA Entity (1). Also, you can create a new entity from *_Structure_* (2):

image::new-entity.png[align=center]

After that, the following window will appear:

image::new-entity-window.png[align=center]

[[id-generation]]
=== ID and Its Generation Strategy

According to the JPA specification, an ID attribute is required for an entity definition. Amplicode allows you to generate this attribute and choose the type (1) and generation strategy (2). Also, you can specify what sequence to use for the Sequence generation strategy (3).

image::new-entity-window-2.png[align=center]

Also, you can generate an ID attribute via Palette (1), Editor Toolbar (2) or using a quick-fix (Alt+Enter/⌥ ⏎) (3).

image::create-id-attribute.png[align=center]

The example of the generated Id code is shown below.

[source, java]
----
    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    @Column(name = "id", nullable = false)
    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
----

[[hibernate-types]]
== Hibernate Types & JPA Converters

Amplicode helps you to generate a blank code fragment for a *_JPA Converter_* or a *_Hibernate Custom Type_* via *_Inspector_*:



Let's say we have an *_isCompleted_* attribute (Boolean) within the *_"Order"_* entity.

image::jpa-converter-inspector.png[align=center]

Put your cursor on this attribute in the code, then click on the *_"Plus"_* pictogram in the Inspector:

image::jpa-converter-inspector-plus.png[align=center]

The following window will appear:

image::create-custom-type.png[align=center]

You can also create it via *_Structure_*. Just click on the "Plus" button and choose *_JPA Converter_* or *_Hibernate Custom Type_*:

image::jpa-converter.png[align=center]

In the Create Custom Type window, you can configure the class name, entity attribute type and database column type.

image::create-jpa-converter.png[align=center]

For JPA Converter you can define whether it will be auto applicable or not.

image::parametrized.png[align=center]

Here is the example of a generated Hibernate Custom Type:

[source, java]
----
package com.company.amplicodedemo.controller;

import org.hibernate.HibernateException;
import org.hibernate.engine.spi.SharedSessionContractImplementor;
import org.hibernate.type.AbstractSingleColumnStandardBasicType;
import org.hibernate.type.descriptor.sql.BitTypeDescriptor;

public class BooleanConverter extends AbstractSingleColumnStandardBasicType<Boolean> {
    public BooleanConverter() {
        super(new BitTypeDescriptor(), new BooleanConverterDescriptor());
    }

    @Override
    public String getName() {
        return "BooleanConverter";
    }

    @Override
    public Object resolve(Object value, SharedSessionContractImplementor session, Object owner, Boolean overridingEager) throws HibernateException {
        return null;
    }

}
----